From: =?utf-8?q?Zbigniew_J=C4=99drzejewski-Szmek?= <zbyszek@in.waw.pl>
Date: Tue, 25 Feb 2014 21:26:31 -0500
Subject: Use /var/run/dbus/system_bus_socket for the D-Bus socket

(cherry picked from commit 1ae383a8a3ae4824453e297352fda603d2d3fd5e)
---
 man/systemd-bus-proxyd@.service.xml | 2 +-
 src/shared/def.h                    | 2 +-
 units/systemd-bus-proxyd.socket     | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/man/systemd-bus-proxyd@.service.xml b/man/systemd-bus-proxyd@.service.xml
index 75a3c8bc..3a5930d5 100644
--- a/man/systemd-bus-proxyd@.service.xml
+++ b/man/systemd-bus-proxyd@.service.xml
@@ -59,7 +59,7 @@ along with systemd; If not, see <http://www.gnu.org/licenses/>.
     <para><filename>systemd-bus-proxyd.socket</filename> will launch
     <filename>systemd-bus-proxyd@.service</filename> for connections
     to the classic D-Bus socket in
-    <filename>/run/dbus/system_bus_socket</filename>.</para>
+    <filename>/var/run/dbus/system_bus_socket</filename>.</para>
 
     <para><filename>systemd-bus-proxyd@.service</filename> is launched
     for an existing D-Bus connection and will use
diff --git a/src/shared/def.h b/src/shared/def.h
index 7777756a..aa489d80 100644
--- a/src/shared/def.h
+++ b/src/shared/def.h
@@ -61,7 +61,7 @@
         "/usr/lib/kbd/keymaps/\0"
 #endif
 
-#define UNIX_SYSTEM_BUS_PATH "unix:path=/run/dbus/system_bus_socket"
+#define UNIX_SYSTEM_BUS_PATH "unix:path=/var/run/dbus/system_bus_socket"
 #define KERNEL_SYSTEM_BUS_PATH "kernel:path=/dev/kdbus/0-system/bus"
 
 #ifdef ENABLE_KDBUS
diff --git a/units/systemd-bus-proxyd.socket b/units/systemd-bus-proxyd.socket
index 406e15b5..6c42d388 100644
--- a/units/systemd-bus-proxyd.socket
+++ b/units/systemd-bus-proxyd.socket
@@ -9,5 +9,5 @@
 Description=Legacy D-Bus Protocol Compatibility Socket
 
 [Socket]
-ListenStream=/run/dbus/system_bus_socket
+ListenStream=/var/run/dbus/system_bus_socket
 Accept=yes
